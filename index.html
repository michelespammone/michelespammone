<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Interactive Image Swap with Effects</title>
<style>
  body, html {
    height: 100%;
    margin: 0;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    background-color: white;
    color: black;
  }

  #imageContainer {
    width: 90%;
    max-width: 500px;
    cursor: pointer;
    display: flex;
    justify-content: center;
    align-items: center;
  }

  img {
    width: 100%;
    transition: transform 0.1s ease-in-out; /* Smooth transition for transform */
  }

  audio {
    display: none;
  }
</style>
<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.4.0"></script>
</head>
<body>

<div id="imageContainer" onclick="startEffects()">
  <img src="1.png" id="imageDisplay" alt="Clickable Image">
</div>

<audio id="audioPlayer" loop>
  <source src="audio.mp3" type="audio/mpeg">
  Your browser does not support the audio element.
</audio>

<script>
  let imageSwapFlag = false;
  let intervalId = null;
  let imagesToPreload = ["1.png", "2.png"];
  let preloadedImages = [];

  function preloadImages() {
    for (let i = 0; i < imagesToPreload.length; i++) {
      preloadedImages[i] = new Image();
      preloadedImages[i].src = imagesToPreload[i];
    }
  }

  function startEffects() {
    if (intervalId === null) {
      document.getElementById('audioPlayer').play();
      intervalId = setInterval(swapImage, 80);
      confettiEffect();
    }
    jiggleImage();
  }

  function jiggleImage() {
    const img = document.getElementById('imageDisplay');
    img.style.transform = 'scale(1.1)';
    setTimeout(() => {
      img.style.transform = '';
    }, 100); // Reset scaling
  }

  function swapImage() {
    const img = document.getElementById('imageDisplay');
    img.src = imageSwapFlag ? "1.png" : "2.png";
    imageSwapFlag = !imageSwapFlag;
  }

  function confettiEffect() {
    const confettiSettings = { angle: 60, spread: 80, particleCount: 150, origin: { y: 0.6 } };
    setInterval(() => {
      canvasConfetti.create(document.body, confettiSettings)();
    }, 750);
  }

  // Preload images on window load
  window.onload = preloadImages;
</script>

</body>
</html>
