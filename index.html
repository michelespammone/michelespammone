<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Preloaded Image Swap with Sound</title>
<style>
  body, html {
    height: 100%;
    margin: 0;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    background-color: black;
    color: white;
  }

  #imageContainer {
    width: 90%; /* Maximum width is 90% of the viewport width */
    max-width: 500px; /* The image won't scale beyond 500px width */
    height: auto; /* height is set to auto to maintain aspect ratio */
    overflow: hidden; /* prevents the image from spilling out of the container */
    cursor: pointer; /* changes the mouse cursor to indicate it's clickable */
  }

  img {
    width: 100%; /* makes the image responsive to the width of its container */
    height: auto; /* maintains the aspect ratio of the image */
  }

  audio {
    display: none; /* initially hidden */
  }
</style>
</head>
<body>

<div id="imageContainer" onclick="startAction()">
  <img src="1.png" id="imageDisplay" alt="Clickable Image">
</div>

<audio id="audioPlayer" loop>
  <source src="audio.mp3" type="audio/mpeg">
  Your browser does not support the audio element.
</audio>

<script>
  let imageSwapFlag = false;
  let intervalId = null;
  let imagesToPreload = ["1.png", "2.png"];
  let preloadedImages = [];

  function preloadImages() {
    for (let i = 0; i < imagesToPreload.length; i++) {
      preloadedImages[i] = new Image();
      preloadedImages[i].src = imagesToPreload[i];
    }
  }

  function startAction() {
    if (intervalId === null) {
      document.getElementById('audioPlayer').play();
      intervalId = setInterval(swapImage, 200);
    }
  }

  function swapImage() {
    const img = document.getElementById('imageDisplay');
    img.src = imageSwapFlag ? "1.png" : "2.png";
    imageSwapFlag = !imageSwapFlag;
  }

  // Preload images on window load
  window.onload = preloadImages;
</script>

</body>
</html>
